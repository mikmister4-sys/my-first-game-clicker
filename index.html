<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–†–∞–±–æ—á–∏–π –ö–ª–∏–∫–µ—Ä</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: sans-serif;
            background-color: #1a1a1a;
            color: white;
            display: flex;
            flex-direction: column;
            height: 100vh;
            transition: background 1s;
        }

        /* –¢–ï–ú–´ –û–∫—Ä—É–∂–µ–Ω–∏—è */
        body.stage-1 { background-color: #1a1a1a; } /* –ö–æ—Å–º–æ—Å */
        body.stage-2 { background-color: #2c3e50; } /* –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è */
        body.stage-3 { background-color: #27ae60; } /* –õ–µ—Å */
        body.stage-4 { background-color: #8e44ad; } /* –ú–∞–≥–∏—è */

        #game {
            display: flex;
            flex-direction: row;
            height: 100%;
        }

        .left {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border-right: 2px solid #333;
        }

        .right {
            width: 320px;
            padding: 20px;
            background: rgba(0,0,0,0.5);
            overflow-y: auto;
        }

        #big-button {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            background: #e74c3c;
            border: 10px solid #c0392b;
            color: white;
            font-size: 24px;
            font-weight: bold;
            cursor: pointer;
            outline: none;
            box-shadow: 0 10px 0 #962d22;
        }

        #big-button:active {
            transform: translateY(5px);
            box-shadow: 0 5px 0 #962d22;
        }

        .score-display {
            text-align: center;
            margin-bottom: 20px;
        }

        #money { font-size: 48px; color: #f1c40f; }

        .upgrade {
            background: #333;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            cursor: pointer;
            border: 1px solid #444;
        }

        .upgrade:hover { background: #444; }
        .upgrade.locked { opacity: 0.5; cursor: not-allowed; }

        .upgrade b { display: block; font-size: 18px; }
        .price { color: #f1c40f; font-weight: bold; }

        @media (max-width: 600px) {
            #game { flex-direction: column; }
            .right { width: auto; height: 50%; }
        }
    </style>
</head>
<body class="stage-1">

<div id="game">
    <div class="left">
        <div class="score-display">
            <div id="location">–õ–æ–∫–∞—Ü–∏—è: –ö–æ—Å–º–æ—Å</div>
            <div id="money">0</div>
            <div id="stats">–ö–ª–∏–∫: 1 | –ê–≤—Ç–æ: 0/—Å–µ–∫</div>
        </div>
        <button id="big-button" onclick="doClick()">–ñ–ú–ò!</button>
    </div>

    <div class="right">
        <h3>–£–ª—É—á—à–µ–Ω–∏—è</h3>
        
        <div class="upgrade" onclick="buyClick()">
            <b>üí™ –°–∏–ª–∞ –∫–ª–∏–∫–∞ (+1)</b>
            <span class="price">–¶–µ–Ω–∞: <span id="c-cost">50</span></span>
        </div>

        <hr>
        <h3>–ê–≤—Ç–æ-–¥–æ—Ö–æ–¥</h3>

        <div class="upgrade" onclick="buyAuto(0)">
            <b>ü§ñ –†–æ–±–æ—Ç-–ø–æ–º–æ—â–Ω–∏–∫</b>
            –î–æ—Ö–æ–¥: +1/—Å–µ–∫ | <span class="price">–¶–µ–Ω–∞: <span id="a-cost-0">15</span></span>
            <div>–í—Å–µ–≥–æ: <span id="a-count-0">0</span></div>
        </div>

        <div class="upgrade" onclick="buyAuto(1)">
            <b>üè≠ –ú–∞–ª–µ–Ω—å–∫–∞—è —Ñ–∞–±—Ä–∏–∫–∞</b>
            –î–æ—Ö–æ–¥: +5/—Å–µ–∫ | <span class="price">–¶–µ–Ω–∞: <span id="a-cost-1">100</span></span>
            <div>–í—Å–µ–≥–æ: <span id="a-count-1">0</span></div>
        </div>

        <div class="upgrade" onclick="buyAuto(2)">
            <b>üöÄ –ö–æ—Å–º–∏—á–µ—Å–∫–∞—è —Å—Ç–∞–Ω—Ü–∏—è</b>
            –î–æ—Ö–æ–¥: +20/—Å–µ–∫ | <span class="price">–¶–µ–Ω–∞: <span id="a-cost-2">1000</span></span>
            <div>–í—Å–µ–≥–æ: <span id="a-count-2">0</span></div>
        </div>
    </div>
</div>

<script>
    // –°–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã
    let money = 0;
    let clickPower = 1;
    let autoPower = 0;
    let clickPrice = 50;

    const autos = [
        { name: "–†–æ–±–æ—Ç", cost: 15, income: 1, count: 0 },
        { name: "–§–∞–±—Ä–∏–∫–∞", cost: 100, income: 5, count: 0 },
        { name: "–°—Ç–∞–Ω—Ü–∏—è", cost: 1000, income: 20, count: 0 }
    ];

    // –ó–≤—É–∫–∏ —á–µ—Ä–µ–∑ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π —Å–∏–Ω—Ç–µ–∑–∞—Ç–æ—Ä
    const ctx = new (window.AudioContext || window.webkitAudioContext)();
    function playNote(freq, type, len) {
        const osc = ctx.createOscillator();
        const gain = ctx.createGain();
        osc.type = type;
        osc.frequency.value = freq;
        osc.connect(gain);
        gain.connect(ctx.destination);
        osc.start();
        gain.gain.exponentialRampToValueAtTime(0.00001, ctx.currentTime + len);
        osc.stop(ctx.currentTime + len);
    }

    // –ö–ª–∏–∫
    function doClick() {
        money += clickPower;
        playNote(440 + Math.random() * 100, 'sine', 0.1);
        updateUI();
    }

    // –ü–æ–∫—É–ø–∫–∞ —Å–∏–ª—ã –∫–ª–∏–∫–∞
    function buyClick() {
        if (money >= clickPrice) {
            money -= clickPrice;
            clickPower += 1;
            clickPrice = Math.round(clickPrice * 1.8);
            playNote(660, 'square', 0.2);
            updateUI();
        }
    }

    // –ü–æ–∫—É–ø–∫–∞ –∞–≤—Ç–æ–∫–ª–∏–∫–µ—Ä–∞
    function buyAuto(id) {
        let item = autos[id];
        if (money >= item.cost) {
            money -= item.cost;
            item.count++;
            autoPower += item.income;
            item.cost = Math.round(item.cost * 1.2);
            playNote(880, 'triangle', 0.3);
            updateUI();
        }
    }

    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —ç–∫—Ä–∞–Ω–∞
    function updateUI() {
        document.getElementById('money').innerText = Math.floor(money);
        document.getElementById('stats').innerText = `–ö–ª–∏–∫: ${clickPower} | –ê–≤—Ç–æ: ${autoPower}/—Å–µ–∫`;
        
        document.getElementById('c-cost').innerText = clickPrice;

        for (let i = 0; i < autos.length; i++) {
            document.getElementById('a-cost-' + i).innerText = autos[i].cost;
            document.getElementById('a-count-' + i).innerText = autos[i].count;
        }

        // –°–º–µ–Ω–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
        const body = document.body;
        const loc = document.getElementById('location');
        if (money >= 1000) {
            body.className = "stage-4";
            loc.innerText = "–õ–æ–∫–∞—Ü–∏—è: –ú–∞–≥–∏—á–µ—Å–∫–∏–π –º–∏—Ä";
        } else if (money >= 500) {
            body.className = "stage-3";
            loc.innerText = "–õ–æ–∫–∞—Ü–∏—è: –ó–µ–ª–µ–Ω—ã–π –ª–µ—Å";
        } else if (money >= 100) {
            body.className = "stage-2";
            loc.innerText = "–õ–æ–∫–∞—Ü–∏—è: –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è";
        } else {
            body.className = "stage-1";
            loc.innerText = "–õ–æ–∫–∞—Ü–∏—è: –ö–æ—Å–º–æ—Å";
        }
    }

    // –ê–≤—Ç–æ-–¥–æ—Ö–æ–¥ (—Ä–∞–∑ –≤ —Å–µ–∫—É–Ω–¥—É)
    setInterval(() => {
        if (autoPower > 0) {
            money += autoPower;
            updateUI();
        }
    }, 1000);

</script>

</body>
</html>